<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TV</title>
  <style>
    body, html {
      height: 100%;
      width: 100%;
      margin: 0;
      display: flex;
    }
    iframe {
      border: none;
      height: 100%;
    }
    #leftFrame {
      width: 50%;
    }
    #rightFrame {
      width: 50%;
    }
  </style>
</head>
<body>
  <iframe id="leftFrame" src="schedule-next-1"></iframe>
  <iframe id="rightFrame" src=""></iframe>

  <script>
    // Refresh left frame every 5 minutes
    const leftFrame = document.getElementById('leftFrame');
    setInterval(() => {
      leftFrame.contentWindow.location.reload();
    }, 300000); // 5 minutes

    // zoom out after load
    leftFrame.onload = function() {
        const leftFrameDocument = leftFrame.contentDocument || leftFrame.contentWindow.document;
        leftFrameDocument.body.style.zoom = "0.8";
    }; 
    
    
    // Right frame: cycle through links every 30 seconds
    const rightFrame = document.getElementById('rightFrame');
    const rightLinks = [
        {% for division in divisions %} 
            "crosstables-division-{{division.id}}",
        {% endfor %} 
        "ranking-all",
   ];
   
    // zoom out after load
    rightFrame.onload = function() {
        const rightFrameDocument = rightFrame.contentDocument || rightFrame.contentWindow.document;
        rightFrameDocument.body.style.zoom = "0.8";
    }; 

    let index = 0;

    function cycleRightFrame() {
      rightFrame.src = rightLinks[index];
      index = (index + 1) % rightLinks.length;
    }

    // Start cycling immediately
    cycleRightFrame();
    setInterval(cycleRightFrame, 30000); // 30 seconds
  </script>
</body>
</html>
